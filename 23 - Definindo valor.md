# Definindo valor

- Então, falando um pouquinho sobre testes automatizados, se você não estiver familiarizado com testes, não se preocupe. Basicamente o que um teste automatizado faz é: executa um código e garante que o resultado é o esperado.

- E quando a gente está criando testes automatizados, é interessante a gente modificar o nosso código para ver se o nosso teste vai falhar, para ver se o teste está realmente testando o nosso código como deveria. Vou dar um exemplo. Eu vou executar esse teste aqui sem debug, só vou rodar ele, e ele está passando. E esse teste garante que propor lance em um leilão finalizado deve lançar uma exceção. Ou seja, esse código aqui está lançando uma exceção. Agora, se eu vier aqui e marcar esse finalizado em vez de marcar como two, se eu marcar como false, o nosso código não pode mais lançar exceção porque o leilão não vai estar finalizado, ou seja, esse teste aqui tem que quebrar. Então quando eu executar nosso teste falhou, ou seja, posso voltar o meu código para o modo original, e eu sei que esse teste está realmente testando alguma coisa, está garantido que ele pega uma falha no nosso código.

- Só que acontece da mesma forma com o debug, com o var_dump, de a gente deixar o código alterado e se esquecer de remover as alterações. Acontece de verdade. Já aconteceu comigo também. E a gente simplesmente esquece e manda esse código para a produção com bug. Então, para a gente evitar esse tipo de possível problema, o que a gente faz? Breakpoint nele. E olha só o que eu vou fazer. Eu vou executar de novo esse teste, mas com o debug agora, para parar nesse breakpoint. Então, por enquanto, “finalizada” é false. Então ele vai executar essa linha. Agora “finalizado” é igual à two. Então, o que eu vou fazer? Botão direito do mouse, “set value”, e aqui eu posso marcar como “false”.

- Agora eu alterei o valor de “finalizado” da minha classe leilão, ou seja, como se eu tivesse alterado código, só que sem mexer no código. Posso inclusive remover esse breakpoint e continuar a execução. E agora olha só o console piscando aqui porque nós temos um erro, nós temos o teste falhando. Ou seja, aconteceu exatamente que a gente esperava, então a gente garantiu que nosso teste está ok.

- De novo, se você não entendeu a parte do teste em si, você ainda não fez os treinamentos de teste, não tem problema. O que eu queria mostrar é: utilizando o PhpStorm e o XDebug, a gente consegue modificar o valor de uma variável em tempo de execução. Então enquanto o programa está rodando, eu consigo mudar o valor da variável. Seja para garantir que um determinado comportamento vai acontecer, como foi o caso, que vai dar um erro no nosso teste, ou seja, para garantir que um cálculo está sendo feito da forma correta, esse tipo de coisa.

- Então a gente pode, durante o debug, durante a depuração do código, alterar valores de variáveis e isso é sensacional, isso pode ser muito útil também. A gente já entendeu bastante sobre depuração de código, e eu confesso que eu estou me divertindo muito, porque eu gosto muito de utilizar esse tipo de ferramenta, mas você pode estar se perguntando: “Vinícius, o projeto onde eu trabalho nem tem testes automatizados. A gente não utiliza a linha de comando. Como que eu vou fazer isso com o navegador? Como que o navegador vai saber que é para rodar no modo de debug? Como que eu o PhpStorm vai saber que o navegador rodou e passou por aquela linha que eu botei um breakpoint?”.

- Fonte: [alura](https://cursos.alura.com.br/course/php-xdebug-profiling/task/64547)
